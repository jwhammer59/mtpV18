<div>
  @if(allMembers$ | async; as allMembers) {
  <p-contextMenu #cm [model]="items"></p-contextMenu>
  <p-table
    [value]="allMembers"
    styleClass="p-datatable-striped"
    [globalFilterFields]="[
      'firstName',
      'lastName',
      'phone',
      'email',
      'city',
      'state'
    ]"
    [paginator]="true"
    [rows]="10"
    [showCurrentPageReport]="true"
    currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
    [rowsPerPageOptions]="[10, 25, 50]"
    dataKey="id"
    [contextMenu]="cm"
    [(contextMenuSelection)]="selectedMember"
  >
    <ng-template pTemplate="header">
      <tr>
        <th pSortableColumn="firstName">
          <div class="flex justify-content-center">
            First Name
            <p-sortIcon field="firstName"></p-sortIcon>
          </div>
        </th>
        <th pSortableColumn="lastName">
          <div class="flex justify-content-center">
            Last Name
            <p-sortIcon field="lastName"></p-sortIcon>
          </div>
        </th>
        <th pSortableColumn="phone">
          <div class="flex justify-content-center">
            Phone
            <p-sortIcon field="phone"></p-sortIcon>
          </div>
        </th>
        <th pSortableColumn="email">
          <div class="flex justify-content-center">
            Email
            <p-sortIcon field="email"></p-sortIcon>
          </div>
        </th>
        <th pSortableColumn="city">
          <div class="flex justify-content-center">
            City
            <p-sortIcon field="city"></p-sortIcon>
          </div>
        </th>
        <th pSortableColumn="state">
          <div class="flex justify-content-center">
            State
            <p-sortIcon field="state"></p-sortIcon>
          </div>
        </th>
        <th pSortableColumn="isFamilyIDHead">
          <div class="flex justify-content-center">
            Head of Family
            <p-sortIcon field="isFamilyIDHead"></p-sortIcon>
          </div>
        </th>
        <th pSortableColumn="isMinsitryHead">
          <div class="flex justify-content-center">
            Head of Ministry
            <p-sortIcon field="isMinsitryHead"></p-sortIcon>
          </div>
        </th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-allMembers>
      <tr
        [pContextMenuRow]="allMembers"
        pTooltip="Right click for options"
        tooltipPosition="top"
      >
        <td>
          <div class="flex justify-content-center">
            {{ allMembers.firstName }}
          </div>
        </td>
        <td>
          <div class="flex justify-content-center">
            {{ allMembers.lastName }}
          </div>
        </td>
        <td>
          <div class="flex justify-content-center">
            {{ allMembers.phone }}
          </div>
        </td>
        <td>
          <div class="flex justify-content-center">
            {{ allMembers.email }}
          </div>
        </td>
        <td>
          <div class="flex justify-content-center">
            {{ allMembers.city }}
          </div>
        </td>
        <td>
          <div class="flex justify-content-center">
            {{ allMembers.state }}
          </div>
        </td>
        <td>
          <div class="flex justify-content-center">
            <p-checkbox
              [(ngModel)]="allMembers.isFamilyIDHead"
              [binary]="true"
              inputId="binary"
              [disabled]="true"
            ></p-checkbox>
          </div>
        </td>
        <td>
          <div class="flex justify-content-center">
            <p-checkbox
              [(ngModel)]="allMembers.isMinsitryHead"
              [binary]="true"
              inputId="binary"
              [disabled]="true"
            ></p-checkbox>
          </div>
        </td>
      </tr>
    </ng-template>
  </p-table>
  }
</div>

<p-dialog
  header="Header"
  [(visible)]="showMemberDetails"
  [modal]="true"
  [style]="{ width: '30rem' }"
>
  <ng-template pTemplate="header">
    <div class="flex justify-content-start">
      <div>
        <span class="font-bold mr-2">Details for Member ID:</span>
        <span class="font-italic"
          >{{ selectedMember.firstName }} {{ selectedMember.lastName }}</span
        >
      </div>
    </div>
  </ng-template>
  <ng-template pTemplate="content">
    <div class="flex flex-column align-items-start">
      <div>
        <span class="font-bold mr-2">Phone: </span
        ><span class="font-italic">{{ selectedMember.phone }}</span>
      </div>
      <div>
        <span class="font-bold mr-2">Email: </span>
        <span class="font-italic">{{ selectedMember.email }}</span>
      </div>
      <div>
        <span class="font-bold mr-2">Address 1: </span
        ><span class="font-italic">{{ selectedMember.add1 }}</span>
      </div>
      <div>
        <span class="font-bold mr-2">Address 2: </span
        ><span class="font-italic">{{ selectedMember.add2 }}</span>
      </div>
      <div>
        <span class="font-bold mr-2">City: </span
        ><span class="font-italic">{{ selectedMember.city }}</span>
      </div>
      <div>
        <span class="font-bold mr-2">State: </span
        ><span class="font-italic">{{ selectedMember.state }}</span>
      </div>
      <div>
        <span class="font-bold mr-2">Zipcode: </span
        ><span class="font-italic">{{ selectedMember.zip }}</span>
      </div>
      <div>
        <span class="font-bold mr-2">Type: </span
        ><span class="font-italic">{{ selectedMember.isFamilyIDHead }}</span>
      </div>
      <div>
        <span class="font-bold mr-2">Is Active: </span
        ><span class="font-italic">{{ selectedMember.isMinsitryHead }}</span>
      </div>
    </div>
  </ng-template>
</p-dialog>
