<div>
  @if(allMemberIds$ | async; as allMemberIds) {
  <p-contextMenu #cm [model]="items"></p-contextMenu>
  <p-table
    [value]="allMemberIds"
    styleClass="p-datatable-striped"
    [globalFilterFields]="[
      'memberIdName',
      'memberIdFullName',
      'memberIdPhone',
      'memberIdEmail',
      'memberIdCity',
      'memberIdState'
    ]"
    [paginator]="true"
    [rows]="10"
    [showCurrentPageReport]="true"
    currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
    [rowsPerPageOptions]="[10, 25, 50]"
    dataKey="id"
    [contextMenu]="cm"
    [(contextMenuSelection)]="selectedMemberId"
  >
    <ng-template pTemplate="header">
      <tr>
        <th pSortableColumn="memberIdName">
          <div class="flex justify-content-center">
            Member ID
            <p-sortIcon field="memberIdName"></p-sortIcon>
          </div>
        </th>
        <th pSortableColumn="memberIdFullName">
          <div class="flex justify-content-center">
            Full Name
            <p-sortIcon field="memberIdFullName"></p-sortIcon>
          </div>
        </th>
        <th pSortableColumn="memberIdPhone">
          <div class="flex justify-content-center">
            Phone
            <p-sortIcon field="memberIdPhone"></p-sortIcon>
          </div>
        </th>
        <th pSortableColumn="memberIdEmail">
          <div class="flex justify-content-center">
            Email
            <p-sortIcon field="memberIdEmail"></p-sortIcon>
          </div>
        </th>
        <th pSortableColumn="memberIdCity">
          <div class="flex justify-content-center">
            City
            <p-sortIcon field="memberIdCity"></p-sortIcon>
          </div>
        </th>
        <th pSortableColumn="memberIdState">
          <div class="flex justify-content-center">
            State
            <p-sortIcon field="memberIdState"></p-sortIcon>
          </div>
        </th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-allMemberIds>
      <tr
        [pContextMenuRow]="allMemberIds"
        pTooltip="Right click for options"
        tooltipPosition="top"
      >
        <td>
          <div class="flex justify-content-center">
            {{ allMemberIds.memberIdName }}
          </div>
        </td>
        <td>
          <div class="flex justify-content-center">
            {{ allMemberIds.memberIdFullName }}
          </div>
        </td>
        <td>
          <div class="flex justify-content-center">
            {{ allMemberIds.memberIdPhone }}
          </div>
        </td>
        <td>
          <div class="flex justify-content-center">
            {{ allMemberIds.memberIdEmail }}
          </div>
        </td>
        <td>
          <div class="flex justify-content-center">
            {{ allMemberIds.memberIdCity }}
          </div>
        </td>
        <td>
          <div class="flex justify-content-center">
            {{ allMemberIds.memberIdState }}
          </div>
        </td>
      </tr>
    </ng-template>
  </p-table>
  }
</div>

<p-dialog
  header="Header"
  [(visible)]="showMemberIdDetails"
  [modal]="true"
  [style]="{ width: '30rem' }"
>
  <ng-template pTemplate="header">
    <div class="flex justify-content-start">
      <div>
        <span class="font-bold mr-2">Details for Member ID:</span>
        <span class="font-italic">{{ selectedMemberId.memberIdName }}</span>
      </div>
    </div>
  </ng-template>
  <ng-template pTemplate="content">
    <div class="flex flex-column align-items-start">
      <div>
        <span class="font-bold mr-2">Name: </span
        ><span class="font-italic">{{
          selectedMemberId.memberIdFullName
        }}</span>
      </div>
      <div>
        <span class="font-bold mr-2">Phone: </span
        ><span class="font-italic">{{ selectedMemberId.memberIdPhone }}</span>
      </div>
      <div>
        <span class="font-bold mr-2">Email: </span>
        <span class="font-italic">{{ selectedMemberId.memberIdEmail }}</span>
      </div>
      <div>
        <span class="font-bold mr-2">Address 1: </span
        ><span class="font-italic">{{ selectedMemberId.memberIdAdd1 }}</span>
      </div>
      <div>
        <span class="font-bold mr-2">Address 2: </span
        ><span class="font-italic">{{ selectedMemberId.memberIdAdd2 }}</span>
      </div>
      <div>
        <span class="font-bold mr-2">City: </span
        ><span class="font-italic">{{ selectedMemberId.memberIdCity }}</span>
      </div>
      <div>
        <span class="font-bold mr-2">State: </span
        ><span class="font-italic">{{ selectedMemberId.memberIdState }}</span>
      </div>
      <div>
        <span class="font-bold mr-2">Zipcode: </span
        ><span class="font-italic">{{ selectedMemberId.memberIdZip }}</span>
      </div>
    </div>
  </ng-template>
</p-dialog>
